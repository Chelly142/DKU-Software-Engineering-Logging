# File Programming 학습목표
- 디스크 구조에대한 이해
- 디스크에대한 시스템 프로그램 논의
- 파일 내부 구조에대한 이해
- 파일과 관련된 시스템 콜 학습
- 파일을 다루는 프로그램 작성

## 디스크 구조
- 디스크 구성 요소
  - Platter(플레터) : 정보가 기록되는 원판 
  - Spindle(스핀들) : 플래터를 회전시켜주는 회전축
  - Surface(서페이스)
  - Track(트랙) : 플래터 표면에서 회전축을 중심으로 하는 동심원 여러개의 트랙이 존재
  - Sector(섹터) : 트랙을 일정한 크기로 나누어 구분한 부분 일정한
  - Cylinder(실린더) : 플레터가 여러장일 때 다른면에 있는 동일 트렉들의 모임
  - Head(헤드) : 데이터를 읽거나 쓸 때 쓰이는 장치 이놈으로 플레터를 자화 시키는거
  - ARM(암) : 플래터의 특정 트랙, 섹터로 접근하게 해주는 팔
  
- 디스크 접근
결국 헤드가 원하는 정보가있는 섹터로 가서 정보를 읽거나 써야한다 따라서 헤드가 움직이는 과정이 모두 물리적으로 이루어진다
Seek time : 헤드가 적절한 트렉으로 가기까지에 시간
Rotational latency : 플레터가 회전함에 따라 원하는 섹터가 헤드 밑으로 오기까지의 대기 시간
Transmission time : 섹터에 정보를 읽고, 쓰는 시간

- 디스크 vs. 플래쉬 메모리
  - 플레시 메모리는 디스크와 달리 기계적으로 작동하지 않아 빠르고 가볍다
  - 디스크는 데이터가 있든없든 덮어 쓰지만 플레시 메모리는 데이터가 있는 경우 지우고 써야하는 과정이 필요하다
  - 플래쉬 메모리는 블록단위로 지우고 쓰기 때문에 지우고싶지 않은 데이터도 함께 지워질수있다 
  - 플래쉬 메모리는 지울수있는 횟수의 제한이 있다
  - 위와 같은 플래시 메모리의 단점을 해결하기위한 소프트웨어 FTL을 개발함
  
## 디스크에대한 시스템 프로그램
- 디스크 디바이스 드라이버
  - 물리적인 하드디스크를 논린적인 디스크로 추상화 시킨다.(헤더나 플레터 이런거 알필요없어!)
  - 논리적 디스크는 디스크 블럭들의 집합이고 블럭의 크기는 페이지의 크기와 같다(보통 4KB)
- File system
  - 논리적인 디스크를 문자열(바이트 집합)로 되어있는 파일로 추상화 시켜준다.
  - 추상화된 파일은 논리적 디스크에 여러 블럭들로 이루어져있다.
  - 한 파일에 디스크 블럭을 할당하는 방법에는 연속할당(성능이 좋다)과 불연속 할당(유연성이 좋다. 이걸 많이 사용)이있다.
  - Inode
    - 파일을 관리 하기위한 메타데이터(데이터를 설명하는 테이터, 데이터들과는 다른곳에 저장)
    - 파일의 모든 속성 정보를 관리(ls-l 명령어로 볼수있는 모든 정보)
    - inode는 디스크에 저장되어있고 파일이 하나 만들어지면 같이 생성된다.
    - inode 는 속성과 위치로 구성된다. 속성은 파일의 속성에대한 설명이 담겨있다.
    - 위치 정보는 direct block 과 indirect block 으로 나뉘는 direct block(12개) 은 직접 데이터를 가리키고  indirect block(1중,2중,3중 총 3개)은 index block을 가리킨다.
    - index block 주소를 가리키는 포인터를 저장하는 block 이다 .
    - index block 을 활용하면 파일의 크기가 커져도 저장이 가능하다.(1중, 2중, 3중)
    
